---
traefik:
  additionalArguments:
    - --entrypoints.websecure.http.tls.certresolver=cloudflare
    - --entrypoints.websecure.http.tls.domains[0].main=concordalabs.com
    - --entrypoints.websecure.http.tls.domains[0].sans=*.concordalabs.com
    - --certificatesresolvers.cloudflare.acme.dnschallenge.provider=cloudflare
    - --certificatesresolvers.cloudflare.acme.email=bruno.luiz.one@gmail.com
    - --certificatesresolvers.cloudflare.acme.dnschallenge.resolvers=1.1.1.1
    - --certificatesresolvers.cloudflare.acme.storage=/certs/acme.json
  logs:
    general:
      level: debug
  ports:
    web:
      redirectTo:
        port: websecure
  service:
    type: NodePort

  env:
    - name: CF_API_EMAIL
      valueFrom:
        secretKeyRef:
          key: CF_EMAIL
          name: cloudflare-api-credentials
    - name: CF_API_KEY
      valueFrom:
        secretKeyRef:
          key: CF_TOKEN
          name: cloudflare-api-credentials

  ingressRoute:
    dashboard:
      enabled: true

  persistence:
    enabled: false # temporary
    path: /certs
    size: 128Mi
